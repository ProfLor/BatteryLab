# Memmert IPP30 Temperature Controller Configuration
# device: Chamber setpoints and control parameters
# eta_model: ETA model selection and tau values
# logging: Logging intervals

device:
  target_temperatures:
    - 40.0 # ← First setpoint
    - 25.0 # Second setpoint
  current_set_index: 0 # Index of active setpoint
  wait_s: 10  # Wait time after reaching target (seconds)
  tolerance: 0.5  # Allowed deviation from target (°C)

eta_model:
  model_type: 2  # 2=EKF, 1=Exponential
  tau_override: 1  # 1=update tau after run
  tau_heating: 5.571804267256505  # Heating time constant (min)
  tau_heating_info: Updated 2025-12-02 23:19:44 | Start T=25.6 °C | End T=40.0 °C  # Info about last heating tau update
  tau_cooling: 10.62  # Cooling time constant (min)
  tau_cooling_info: Updated 2025-12-01 00:32:04 | Start T=0.0°C  # Info about last cooling tau update

logging:
  dt_s: 60.0  # Device polling interval (seconds)
  dt_logfile_s: 10.0  # Log file write interval (seconds)

# EKF parameters (only for experienced users)
# Tuning these parameters affects EKF convergence and stability
# Note: 3-state EKF estimates [T_current, tau, Tinf] for robust convergence
ekf:
  window_size: 20  # Number of samples for rolling window fit
  outlier_threshold: 4.0  # Robust z-score threshold for outlier detection
  P_init: [10.0, 5.0, 1.0]  # Initial state covariance [T, tau, Tinf] - allow tau uncertainty
  Q_process: [0.0025, 0.01, 0.0001]  # Process noise [T, tau, Tinf] - tau can adapt, Tinf stable
  R_measurement: 0.01  # Measurement noise variance
